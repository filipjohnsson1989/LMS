@page "{id}"
@model ActivitiesModel

@{
    Layout = "_Layout.cshtml";
    ViewData["Title"] = "Activities";
}


<div class="container">
    <ul id="activities" class="col">
        <li>
            <h2>Activities</h2>
        </li>
         <li>
                <a asp-route-sortOrder="@Model.DateSort">
                    Sort By Date
                </a>
        </li> 
        <li>
                <a asp-route-sortOrder="@Model.NameSort">
                    Sort By Name
                </a>
        </li>




        @{
            var i = 1;
            foreach (var activity in Model.Activities)
            {
                i = activity.Id;
                var activityId = $"activity{i}";
                

                if (activity.EndDate.CompareTo(DateTime.Now) > 0)
                {
                    var due = activity.EndDate - DateTime.Now;
                    string startDate = $"{activity.StartDate.ToShortDateString()}, {activity.StartDate.ToShortTimeString()}";
                    string endDate = $"{activity.EndDate.ToShortDateString()}, {activity.EndDate.ToShortTimeString()}";
                    string dueTime = $"{@due.Days} day(s), {@due.Hours}h & {@due.Minutes}m";

                    if (activity.ActivityType.Id == 2)
                    {
                        //Assignment
                        <li class="card card-assignment p-1" id="@activityId">
                            <p class="card-header"><strong>Title:</strong> @Html.DisplayFor(model => activity.Name)</p>
                            <p class="card-header"><strong>Starts:</strong> @startDate</p>
                            <p class="card-header"><strong>Ends:</strong> @endDate </p>
                            <div class="card-header"><strong>Due in: </strong>@dueTime</div>
                            <div class="card-body row">
                                <div class="btn btn-primary infoButton col-3">TestBtn</div>
                                <div class="btn btn-primary col-3">TestUploadBtn</div>
                            </div>
                            <div class="card-body hidden">Hej det här syns inte</div>
                        </li>
                        
                    }
                    else
                    {
                        //not assignment
                        <li class="card p-1" id="@activityId">
                            <p class="card-header"><strong>Title:</strong> @Html.DisplayFor(model => activity.Name)</p>
                            <p class="card-header"><strong>Starts:</strong> @startDate</p>
                            <p class="card-header"><strong>Ends:</strong> @endDate </p>
                            <div class="card-body col"><div class="btn btn-primary infoButton col-6">TestBtn</div></div>
                            <div class="card-body hidden">Hej det här syns inte</div>
                        </li>
                    }
                }
            }
        }
    </ul>
</div>

<script src="/js/ActivitySite.js"></script> 

